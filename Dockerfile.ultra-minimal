# Ultra minimal Dockerfile - NO HEALTH CHECK, NO COMPLEXITY
FROM node:22-alpine

WORKDIR /app

# Copy package files
COPY package.json pnpm-lock.yaml ./

# Install dependencies
RUN npm install -g pnpm && pnpm install --frozen-lockfile

# Copy source
COPY . .

# Build simple version
RUN npx vite build --config vite.config.simple.ts

# Expose port
EXPOSE 80

# Start simple server - NO HEALTH CHECK
CMD ["node", "dist/server/simple.mjs"]
